
{% extends 'catalog/base.html' %}

{% load static %}


{% block title %}{{favorite.substitute.name}}{% endblock %}

{% block content %}
<div class= "container-fluid product-detail">
    <h2>{{ favorite.substitute.name }}</h2>
    <img class="product-picture" src={{ favorite.substitute.picture }} alt="food picture">
    <div class="row product-infos">
        <div class="col-4 p-0 text-end product-nutriscore">
            {% if favorite.substitute.nutriscore == "A" %}
                <img src={% static 'catalog/assets/img/nutriscore-a.svg' %} alt="nutriscore-a">
            {% elif favorite.substitute.nutriscore == "B" %}
                <img src={% static 'catalog/assets/img/nutriscore-b.svg' %} alt="nutriscore-b">
            {% elif favorite.substitute.nutriscore == "C" %}
                <img src={% static 'catalog/assets/img/nutriscore-c.svg' %} alt="nutriscore-c">
            {% elif favorite.substitute.nutriscore == "D" %}
                <img src={% static 'catalog/assets/img/nutriscore-d.svg' %} alt="nutriscore-d">
            {% elif favorite.substitute.nutriscore == "E" %}
                <img src={% static 'catalog/assets/img/nutriscore-e.svg' %} alt="nutriscore-e">
            {% endif %}
        </div>
        <div class="col-4 p-0">
            <a class="openfoodfacts-link" href={{ favorite.substitute.url }} target="_blank">Voir la fiche d'OpenFoodFacts</a>
        </div>
        <div class="col-4 p-0 text-start nutrients-list">
            <p>Valeurs nutritionnelles pour 100g:</p>
            <ul>
                <li>Energie: {{ favorite.substitute.nutrients.kcal }}Kcal</li>
                <li>Protéines: {{ favorite.substitute.nutrients.proteins }}g</li>
                <li>Glucides: {{ favorite.substitute.nutrients.carbohydrates }}g</li>
                <li>dont sucres: {{ favorite.substitute.nutrients.sugars }}g</li>
                <li>Lipides: {{ favorite.substitute.nutrients.fat }}g</li>
                <li>dont acides gras saturés: {{ favorite.substitute.nutrients.saturated_fat }}g</li>
            </ul>
        </div>
    </div>
    <div>
        <p>Aliment substitué:</p>
        <a href="{% url 'product_detail' favorite.product.pk %}" class="call-to-action-link">
            <div class="call-to-action">
                <i class="fas fa-eye"></i>
                <p>{{ favorite.product.name }}</p>
            </div>
        </a>

        <form id="favorite-delete-form" method="POST" action="{% url 'delete_favorite' favorite.pk %}">
            {% csrf_token %}
            <input type="hidden" name="data"/>
        </form>
        <a href="#" onclick='document.getElementById("favorite-delete-form").submit()'>
            <div class="call-to-action">
                <i class="fas fa-trash-alt"></i>
                <p>Supprimer</p>
            </div>
        </a>
    </div>
    
    {% if messages %}
        {% for message in messages %}
            <div {% if message.tags %} class="alert {{ message.tags }} alert-dismissible" role="alert" {% endif %}>
                {{ message }}
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>
        {% endfor %}
    {% endif %}

</div>
{% endblock content %}